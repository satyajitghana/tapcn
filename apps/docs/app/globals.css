@import 'tailwindcss';
@import 'fumadocs-ui/css/neutral.css';
@import 'fumadocs-ui/css/preset.css';

/* Scan registry component source for Tailwind class usage */
@source "../../../packages/registry/src";
/* Also scan the preview components */
@source "../components";

/*
 * tapcn design tokens at :root — ensures portal-based components (Dialog, AlertDialog,
 * DropdownMenu, etc.) can resolve colors when rendered outside .tapcn-preview via Radix portals.
 * Safe because the docs site uses fd-prefixed utilities (bg-fd-background), not bg-background.
 */
:root {
  --tapcn-background: hsl(0 0% 100%);
  --tapcn-foreground: hsl(240 10% 3.9%);
  --tapcn-card: hsl(0 0% 100%);
  --tapcn-card-foreground: hsl(240 10% 3.9%);
  --tapcn-popover: hsl(0 0% 100%);
  --tapcn-popover-foreground: hsl(240 10% 3.9%);
  --tapcn-primary: hsl(240 5.9% 10%);
  --tapcn-primary-foreground: hsl(0 0% 98%);
  --tapcn-secondary: hsl(240 4.8% 95.9%);
  --tapcn-secondary-foreground: hsl(240 5.9% 10%);
  --tapcn-muted: hsl(240 4.8% 95.9%);
  --tapcn-muted-foreground: hsl(240 3.8% 46.1%);
  --tapcn-accent: hsl(240 4.8% 95.9%);
  --tapcn-accent-foreground: hsl(240 5.9% 10%);
  --tapcn-destructive: hsl(0 84.2% 60.2%);
  --tapcn-destructive-foreground: hsl(0 0% 98%);
  --tapcn-border: hsl(240 5.9% 90%);
  --tapcn-input: hsl(240 5.9% 90%);
  --tapcn-ring: hsl(240 5.9% 10%);
  --tapcn-radius: 0.5rem;
}

@theme inline {
  /* tapcn color system — maps Tailwind utilities (bg-primary, text-foreground, etc.)
     to CSS vars that only resolve inside .tapcn-preview */
  --color-background: var(--tapcn-background);
  --color-foreground: var(--tapcn-foreground);
  --color-card: var(--tapcn-card);
  --color-card-foreground: var(--tapcn-card-foreground);
  --color-popover: var(--tapcn-popover);
  --color-popover-foreground: var(--tapcn-popover-foreground);
  --color-primary: var(--tapcn-primary);
  --color-primary-foreground: var(--tapcn-primary-foreground);
  --color-secondary: var(--tapcn-secondary);
  --color-secondary-foreground: var(--tapcn-secondary-foreground);
  --color-muted: var(--tapcn-muted);
  --color-muted-foreground: var(--tapcn-muted-foreground);
  --color-accent: var(--tapcn-accent);
  --color-accent-foreground: var(--tapcn-accent-foreground);
  --color-destructive: var(--tapcn-destructive);
  --color-destructive-foreground: var(--tapcn-destructive-foreground);
  --color-border: var(--tapcn-border);
  --color-input: var(--tapcn-input);
  --color-ring: var(--tapcn-ring);

  --radius-lg: var(--tapcn-radius, 0.5rem);
  --radius-md: calc(var(--tapcn-radius, 0.5rem) - 2px);
  --radius-sm: calc(var(--tapcn-radius, 0.5rem) - 4px);

  /* Marquee animation */
  --animate-marquee: marquee var(--duration) infinite linear;

  @keyframes marquee {
    from { transform: translateX(0); }
    to { transform: translateX(calc(-100% - var(--gap))); }
  }

  /* Fade-in animation (used by shader backgrounds and tab transitions) */
  @keyframes fd-fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Font families */
  --font-sans: var(--font-geist-sans), ui-sans-serif, system-ui, sans-serif;
  --font-mono: var(--font-geist-mono), ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'Liberation Mono', monospace;
}

/* Brand + landing page colors — separate @theme block so .dark overrides work */
@theme {
  --color-brand: hsl(245, 58%, 51%);
  --color-brand-foreground: white;
  --color-brand-secondary: hsl(240, 40%, 96%);
  --color-brand-secondary-foreground: hsl(240, 20%, 20%);
  --color-brand-200: hsl(245, 58%, 44%);
  --color-landing-foreground: hsl(240, 10%, 25%);
  --color-landing-foreground-200: hsl(240, 8%, 50%);
}

/*
 * react-native-web default styles — @layer base so Tailwind utilities override.
 * These mirror the layout defaults from react-native-web's View/Text components.
 */
@layer base {
  .rnw-view {
    align-content: flex-start;
    align-items: stretch;
    box-sizing: border-box;
    display: flex;
    flex-basis: auto;
    flex-direction: column;
    flex-shrink: 0;
    list-style: none;
    margin: 0;
    min-height: 0;
    min-width: 0;
    padding: 0;
    position: relative;
    z-index: 0;
  }
  .rnw-text {
    box-sizing: border-box;
    color: inherit;
    font: inherit;
    margin: 0;
    padding: 0;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
}

/* tapcn design tokens — scoped to preview container only */
.tapcn-preview {
  --tapcn-background: hsl(0 0% 100%);
  --tapcn-foreground: hsl(240 10% 3.9%);
  --tapcn-card: hsl(0 0% 100%);
  --tapcn-card-foreground: hsl(240 10% 3.9%);
  --tapcn-popover: hsl(0 0% 100%);
  --tapcn-popover-foreground: hsl(240 10% 3.9%);
  --tapcn-primary: hsl(240 5.9% 10%);
  --tapcn-primary-foreground: hsl(0 0% 98%);
  --tapcn-secondary: hsl(240 4.8% 95.9%);
  --tapcn-secondary-foreground: hsl(240 5.9% 10%);
  --tapcn-muted: hsl(240 4.8% 95.9%);
  --tapcn-muted-foreground: hsl(240 3.8% 46.1%);
  --tapcn-accent: hsl(240 4.8% 95.9%);
  --tapcn-accent-foreground: hsl(240 5.9% 10%);
  --tapcn-destructive: hsl(0 84.2% 60.2%);
  --tapcn-destructive-foreground: hsl(0 0% 98%);
  --tapcn-border: hsl(240 5.9% 90%);
  --tapcn-input: hsl(240 5.9% 90%);
  --tapcn-ring: hsl(240 5.9% 10%);
  --tapcn-radius: 0.5rem;
}

/* Hero gradient text animation */
@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* Grid dot pattern for hero background */
.bg-grid-pattern {
  background-image: radial-gradient(circle, hsl(245 58% 51% / 0.15) 1px, transparent 1px);
  background-size: 24px 24px;
}

/* Cursor blink animation */
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.dark .bg-grid-pattern {
  background-image: radial-gradient(circle, hsl(240 80% 75% / 0.10) 1px, transparent 1px);
}

.dark .tapcn-preview {
  --tapcn-background: hsl(240 10% 3.9%);
  --tapcn-foreground: hsl(0 0% 98%);
  --tapcn-card: hsl(240 10% 3.9%);
  --tapcn-card-foreground: hsl(0 0% 98%);
  --tapcn-popover: hsl(240 10% 3.9%);
  --tapcn-popover-foreground: hsl(0 0% 98%);
  --tapcn-primary: hsl(0 0% 98%);
  --tapcn-primary-foreground: hsl(240 5.9% 10%);
  --tapcn-secondary: hsl(240 3.7% 15.9%);
  --tapcn-secondary-foreground: hsl(0 0% 98%);
  --tapcn-muted: hsl(240 3.7% 15.9%);
  --tapcn-muted-foreground: hsl(240 5% 64.9%);
  --tapcn-accent: hsl(240 3.7% 15.9%);
  --tapcn-accent-foreground: hsl(0 0% 98%);
  --tapcn-destructive: hsl(0 72% 51%);
  --tapcn-destructive-foreground: hsl(0 0% 98%);
  --tapcn-border: hsl(240 3.7% 15.9%);
  --tapcn-input: hsl(240 3.7% 15.9%);
  --tapcn-ring: hsl(240 4.9% 83.9%);
}

/* Dark mode brand colors + tapcn tokens for portal-rendered components */
.dark {
  --color-brand: hsl(240, 80%, 75%);
  --color-brand-foreground: hsl(240, 30%, 8%);
  --color-brand-secondary: hsl(240, 20%, 15%);
  --color-brand-secondary-foreground: hsl(240, 30%, 92%);
  --color-brand-200: hsl(240, 80%, 85%);

  /* Landing page text colors — dark mode (bright for visibility) */
  --color-landing-foreground: hsl(0, 0%, 95%);
  --color-landing-foreground-200: hsl(0, 0%, 72%);

  /* tapcn dark tokens — mirrors .dark .tapcn-preview so portals resolve correctly */
  --tapcn-background: hsl(240 10% 3.9%);
  --tapcn-foreground: hsl(0 0% 98%);
  --tapcn-card: hsl(240 10% 3.9%);
  --tapcn-card-foreground: hsl(0 0% 98%);
  --tapcn-popover: hsl(240 10% 3.9%);
  --tapcn-popover-foreground: hsl(0 0% 98%);
  --tapcn-primary: hsl(0 0% 98%);
  --tapcn-primary-foreground: hsl(240 5.9% 10%);
  --tapcn-secondary: hsl(240 3.7% 15.9%);
  --tapcn-secondary-foreground: hsl(0 0% 98%);
  --tapcn-muted: hsl(240 3.7% 15.9%);
  --tapcn-muted-foreground: hsl(240 5% 64.9%);
  --tapcn-accent: hsl(240 3.7% 15.9%);
  --tapcn-accent-foreground: hsl(0 0% 98%);
  --tapcn-destructive: hsl(0 72% 51%);
  --tapcn-destructive-foreground: hsl(0 0% 98%);
  --tapcn-border: hsl(240 3.7% 15.9%);
  --tapcn-input: hsl(240 3.7% 15.9%);
  --tapcn-ring: hsl(240 4.9% 83.9%);
}

/* Apply font families */
body {
  font-family: var(--font-sans);
}

code, pre {
  font-family: var(--font-mono);
}

/* Shiki code block theme integration */
pre[class*="shiki"] {
  background-color: hsl(var(--fd-card)) !important;
  border: 1px solid hsl(var(--fd-border));
}

.dark pre[class*="shiki"] {
  background-color: hsl(var(--fd-card)) !important;
}

/* Shiny pill shimmer animation for hero badge */
@keyframes shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

.shiny-pill {
  background: linear-gradient(
    110deg,
    transparent 25%,
    hsl(245 58% 51% / 0.12) 37%,
    transparent 63%
  );
  background-size: 200% 100%;
  animation: shimmer 4s ease-in-out infinite;
}

.dark .shiny-pill {
  background: linear-gradient(
    110deg,
    transparent 25%,
    hsl(240 80% 75% / 0.15) 37%,
    transparent 63%
  );
  background-size: 200% 100%;
  animation: shimmer 4s ease-in-out infinite;
}
