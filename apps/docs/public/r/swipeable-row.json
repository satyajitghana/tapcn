{
  "name": "swipeable-row",
  "type": "registry:ui",
  "title": "Swipeable Row",
  "description": "A swipeable row component.",
  "registryDependencies": [],
  "dependencies": [],
  "files": [
    {
      "path": "components/ui/swipeable-row.tsx",
      "type": "registry:ui",
      "content": "import { cn } from '@/lib/utils';\nimport * as React from 'react';\nimport { Dimensions, LayoutChangeEvent, PanResponder, Pressable, View } from 'react-native';\nimport Animated, { useAnimatedStyle, useSharedValue, withSpring } from 'react-native-reanimated';\n\nconst SNAP_THRESHOLD = 0.4;\nconst FULL_SWIPE_THRESHOLD = 0.8;\nconst SCREEN_WIDTH = Dimensions.get('window').width;\n\ninterface SwipeableRowProps {\n  children: React.ReactNode;\n  leftActions?: React.ReactNode;\n  rightActions?: React.ReactNode;\n  leftActionWidth?: number;\n  rightActionWidth?: number;\n  onSwipeLeft?: () => void;\n  onSwipeRight?: () => void;\n  className?: string;\n}\n\ninterface SwipeActionProps {\n  onPress: () => void;\n  className?: string;\n  children: React.ReactNode;\n}\n\nfunction SwipeAction({ onPress, className, children }: SwipeActionProps) {\n  return (\n    <Pressable\n      onPress={onPress}\n      className={cn('flex-1 items-center justify-center', className)}\n    >\n      {children}\n    </Pressable>\n  );\n}\n\nfunction SwipeableRow({\n  children,\n  leftActions,\n  rightActions,\n  leftActionWidth = 80,\n  rightActionWidth = 80,\n  onSwipeLeft,\n  onSwipeRight,\n  className,\n}: SwipeableRowProps) {\n  const translateX = useSharedValue(0);\n  const startX = React.useRef(0);\n  const rowWidth = React.useRef(0);\n\n  const handleLayout = React.useCallback((event: LayoutChangeEvent) => {\n    rowWidth.current = event.nativeEvent.layout.width;\n  }, []);\n\n  const panResponder = React.useMemo(\n    () =>\n      PanResponder.create({\n        onStartShouldSetPanResponder: () => false,\n        onMoveShouldSetPanResponder: (_, gestureState) =>\n          Math.abs(gestureState.dx) > 5 && Math.abs(gestureState.dx) > Math.abs(gestureState.dy),\n        onPanResponderGrant: () => {\n          startX.current = translateX.value;\n        },\n        onPanResponderMove: (_, gestureState) => {\n          const nextX = startX.current + gestureState.dx;\n          const clampedLeft = leftActions ? leftActionWidth : 0;\n          const clampedRight = rightActions ? rightActionWidth : 0;\n          translateX.value = Math.min(clampedLeft, Math.max(-clampedRight, nextX));\n        },\n        onPanResponderRelease: (_, gestureState) => {\n          const nextX = startX.current + gestureState.dx;\n\n          // Swiping right (revealing left actions)\n          if (nextX > 0 && leftActions) {\n            const ratio = nextX / leftActionWidth;\n\n            if (ratio >= FULL_SWIPE_THRESHOLD && onSwipeRight) {\n              translateX.value = withSpring(SCREEN_WIDTH, {\n                damping: 20,\n                stiffness: 200,\n              });\n              onSwipeRight();\n              return;\n            }\n\n            if (ratio >= SNAP_THRESHOLD) {\n              translateX.value = withSpring(leftActionWidth, {\n                damping: 20,\n                stiffness: 200,\n              });\n              return;\n            }\n          }\n\n          // Swiping left (revealing right actions)\n          if (nextX < 0 && rightActions) {\n            const ratio = Math.abs(nextX) / rightActionWidth;\n\n            if (ratio >= FULL_SWIPE_THRESHOLD && onSwipeLeft) {\n              translateX.value = withSpring(-SCREEN_WIDTH, {\n                damping: 20,\n                stiffness: 200,\n              });\n              onSwipeLeft();\n              return;\n            }\n\n            if (ratio >= SNAP_THRESHOLD) {\n              translateX.value = withSpring(-rightActionWidth, {\n                damping: 20,\n                stiffness: 200,\n              });\n              return;\n            }\n          }\n\n          // Snap back to rest\n          translateX.value = withSpring(0, {\n            damping: 20,\n            stiffness: 200,\n          });\n        },\n      }),\n    [leftActions, rightActions, leftActionWidth, rightActionWidth, onSwipeLeft, onSwipeRight, translateX]\n  );\n\n  const frontAnimatedStyle = useAnimatedStyle(() => ({\n    transform: [{ translateX: translateX.value }],\n  }));\n\n  return (\n    <View\n      className={cn('overflow-hidden bg-background', className)}\n      onLayout={handleLayout}\n    >\n      {/* Actions layer (behind) */}\n      <View className=\"absolute bottom-0 left-0 right-0 top-0 flex-row\">\n        {/* Left actions */}\n        {leftActions ? (\n          <View\n            className=\"absolute bottom-0 left-0 top-0 justify-center\"\n            style={{ width: leftActionWidth }}\n          >\n            {leftActions}\n          </View>\n        ) : null}\n\n        {/* Right actions */}\n        {rightActions ? (\n          <View\n            className=\"absolute bottom-0 right-0 top-0 justify-center\"\n            style={{ width: rightActionWidth }}\n          >\n            {rightActions}\n          </View>\n        ) : null}\n      </View>\n\n      {/* Front content */}\n      <Animated.View\n        className=\"bg-background\"\n        style={frontAnimatedStyle}\n        {...panResponder.panHandlers}\n      >\n        {children}\n      </Animated.View>\n    </View>\n  );\n}\n\nexport { SwipeAction, SwipeableRow };\nexport type { SwipeableRowProps };\n"
    }
  ]
}
