{
  "name": "carousel",
  "type": "registry:ui",
  "title": "Carousel",
  "description": "A carousel component.",
  "registryDependencies": [],
  "dependencies": [],
  "files": [
    {
      "path": "components/ui/carousel.tsx",
      "type": "registry:ui",
      "content": "import { cn } from '@/lib/utils';\nimport * as React from 'react';\nimport {\n  Dimensions,\n  NativeScrollEvent,\n  NativeSyntheticEvent,\n  ScrollView,\n  View,\n} from 'react-native';\n\nconst SCREEN_WIDTH = Dimensions.get('window').width;\nconst DEFAULT_GAP = 16;\nconst DEFAULT_AUTO_PLAY_INTERVAL = 4000;\n\ninterface CarouselProps<T> {\n  data: T[];\n  renderItem: (item: T, index: number) => React.ReactNode;\n  itemWidth?: number;\n  gap?: number;\n  showIndicators?: boolean;\n  autoPlay?: boolean;\n  autoPlayInterval?: number;\n  className?: string;\n}\n\ninterface CarouselIndicatorProps {\n  count: number;\n  activeIndex: number;\n}\n\nfunction CarouselIndicator({ count, activeIndex }: CarouselIndicatorProps) {\n  return (\n    <View className=\"mt-3 flex-row items-center justify-center gap-1.5\">\n      {Array.from({ length: count }, (_, index) => (\n        <View\n          key={index}\n          className={cn(\n            'h-2 w-2 rounded-full',\n            index === activeIndex ? 'bg-primary' : 'bg-muted-foreground/30'\n          )}\n        />\n      ))}\n    </View>\n  );\n}\n\nfunction Carousel<T>({\n  data,\n  renderItem,\n  itemWidth = SCREEN_WIDTH - DEFAULT_GAP * 2,\n  gap = DEFAULT_GAP,\n  showIndicators = true,\n  autoPlay = false,\n  autoPlayInterval = DEFAULT_AUTO_PLAY_INTERVAL,\n  className,\n}: CarouselProps<T>) {\n  const [activeIndex, setActiveIndex] = React.useState(0);\n  const scrollViewRef = React.useRef<ScrollView>(null);\n  const autoPlayRef = React.useRef<ReturnType<typeof setInterval> | null>(null);\n  const isUserInteracting = React.useRef(false);\n\n  const snapInterval = itemWidth + gap;\n\n  const handleMomentumScrollEnd = React.useCallback(\n    (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n      const offsetX = event.nativeEvent.contentOffset.x;\n      const index = Math.round(offsetX / snapInterval);\n      setActiveIndex(index);\n      isUserInteracting.current = false;\n    },\n    [snapInterval]\n  );\n\n  const handleScrollBeginDrag = React.useCallback(() => {\n    isUserInteracting.current = true;\n  }, []);\n\n  const scrollToIndex = React.useCallback(\n    (index: number) => {\n      scrollViewRef.current?.scrollTo({\n        x: index * snapInterval,\n        animated: true,\n      });\n    },\n    [snapInterval]\n  );\n\n  React.useEffect(() => {\n    if (!autoPlay || data.length <= 1) {\n      return;\n    }\n\n    autoPlayRef.current = setInterval(() => {\n      if (isUserInteracting.current) {\n        return;\n      }\n\n      setActiveIndex((prev) => {\n        const nextIndex = prev >= data.length - 1 ? 0 : prev + 1;\n        scrollToIndex(nextIndex);\n        return nextIndex;\n      });\n    }, autoPlayInterval);\n\n    return () => {\n      if (autoPlayRef.current) {\n        clearInterval(autoPlayRef.current);\n      }\n    };\n  }, [autoPlay, autoPlayInterval, data.length, scrollToIndex]);\n\n  return (\n    <View className={cn(className)}>\n      <ScrollView\n        ref={scrollViewRef}\n        horizontal\n        showsHorizontalScrollIndicator={false}\n        snapToInterval={snapInterval}\n        snapToAlignment=\"start\"\n        decelerationRate=\"fast\"\n        contentContainerStyle={{ gap }}\n        onMomentumScrollEnd={handleMomentumScrollEnd}\n        onScrollBeginDrag={handleScrollBeginDrag}\n      >\n        {data.map((item, index) => (\n          <View key={index} style={{ width: itemWidth }}>\n            {renderItem(item, index)}\n          </View>\n        ))}\n      </ScrollView>\n      {showIndicators && data.length > 1 && (\n        <CarouselIndicator count={data.length} activeIndex={activeIndex} />\n      )}\n    </View>\n  );\n}\n\nexport { Carousel };\nexport type { CarouselProps };\n"
    }
  ]
}
