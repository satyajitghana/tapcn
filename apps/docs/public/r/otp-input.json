{
  "name": "otp-input",
  "type": "registry:ui",
  "title": "Otp Input",
  "description": "A otp input component.",
  "registryDependencies": [],
  "dependencies": [],
  "files": [
    {
      "path": "components/ui/otp-input.tsx",
      "type": "registry:ui",
      "content": "import { cn } from '@/lib/utils';\nimport * as React from 'react';\nimport { Platform, Pressable, Text, TextInput, View } from 'react-native';\nimport Animated, { useAnimatedStyle, useSharedValue, withRepeat, withTiming } from 'react-native-reanimated';\n\ninterface OTPInputProps {\n  length?: number;\n  value?: string;\n  onComplete?: (code: string) => void;\n  onChangeText?: (text: string) => void;\n  secureTextEntry?: boolean;\n  disabled?: boolean;\n  className?: string;\n}\n\nfunction OTPInput({\n  length = 6,\n  value = '',\n  onComplete,\n  onChangeText,\n  secureTextEntry = false,\n  disabled = false,\n  className,\n}: OTPInputProps) {\n  const inputRef = React.useRef<TextInput>(null);\n  const cursorOpacity = useSharedValue(1);\n\n  React.useEffect(() => {\n    cursorOpacity.value = withRepeat(withTiming(0, { duration: 500 }), -1, true);\n  }, [cursorOpacity]);\n\n  const cursorAnimatedStyle = useAnimatedStyle(() => ({\n    opacity: cursorOpacity.value,\n  }));\n\n  const handlePress = React.useCallback(() => {\n    if (!disabled) {\n      inputRef.current?.focus();\n    }\n  }, [disabled]);\n\n  const handleChangeText = React.useCallback(\n    (text: string) => {\n      const sanitized = text.replace(/[^0-9]/g, '').slice(0, length);\n      onChangeText?.(sanitized);\n      if (sanitized.length === length) {\n        onComplete?.(sanitized);\n      }\n    },\n    [length, onChangeText, onComplete]\n  );\n\n  const [isFocused, setIsFocused] = React.useState(false);\n\n  return (\n    <View className={cn('flex-row gap-2', disabled && 'opacity-50', className)}>\n      <TextInput\n        ref={inputRef}\n        value={value}\n        onChangeText={handleChangeText}\n        onFocus={() => setIsFocused(true)}\n        onBlur={() => setIsFocused(false)}\n        maxLength={length}\n        keyboardType=\"number-pad\"\n        autoComplete=\"one-time-code\"\n        editable={!disabled}\n        caretHidden\n        style={{\n          position: 'absolute',\n          opacity: 0,\n          width: 1,\n          height: 1,\n        }}\n      />\n      {Array.from({ length }, (_, index) => {\n        const char = value[index];\n        const isFocusedCell = isFocused && index === value.length;\n        const isFilled = char !== undefined;\n\n        return (\n          <Pressable key={index} onPress={handlePress}>\n            <View\n              className={cn(\n                'border-input bg-background h-14 w-12 items-center justify-center rounded-lg border',\n                isFocusedCell && 'border-primary border-2',\n                Platform.select({\n                  web: cn(\n                    'transition-colors',\n                    !disabled && 'cursor-text'\n                  ),\n                })\n              )}\n            >\n              {isFilled ? (\n                secureTextEntry ? (\n                  <View className=\"bg-foreground size-3 rounded-full\" />\n                ) : (\n                  <Text className=\"text-foreground text-xl font-semibold\">{char}</Text>\n                )\n              ) : isFocusedCell ? (\n                <Animated.View\n                  style={cursorAnimatedStyle}\n                  className=\"bg-foreground h-6 w-0.5 rounded-full\"\n                />\n              ) : null}\n            </View>\n          </Pressable>\n        );\n      })}\n    </View>\n  );\n}\n\nexport { OTPInput };\nexport type { OTPInputProps };\n"
    }
  ]
}
